<!--{% extends 'users/base.html' %}-->
<!--{% load static %}-->

<!--{% block content %}-->
<!--<div id="wrapper">-->
<!--    {% include 'users/includes/admin_sidebar.html' %}-->

<!--    <div class="main-content" id="main-content">-->
<!--        <nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom shadow-sm">-->
<!--            <div class="container-fluid px-4 py-2">-->
<!--                <button class="btn btn-outline-secondary d-md-none me-3" id="mobileToggle">-->
<!--                    <i class="fas fa-bars"></i>-->
<!--                </button>-->
<!--                <h4 class="mb-0 text-primary">Admin Claims Management</h4>-->
<!--            </div>-->
<!--        </nav>-->

<!--        &lt;!&ndash; FIX: Content area with proper spacing &ndash;&gt;-->
<!--        <div class="content-body p-1 p-md-4">-->
<!--            <div class="card shadow border-0">-->
<!--                <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">-->
<!--                    <h5 class="mb-0"><i class="fas fa-file-contract me-2"></i>Claim Submitted Policies</h5>-->
<!--                    <span class="text-white">Welcome, Admin Ramya!</span>-->
<!--                </div>-->

<!--                <div class="claims-table-wrapper p-3">-->
<!--                    <p class="text-muted mb-4">Review, process, and update the status of submitted claims.</p>-->

<!--                    <div class="table-responsive table-scroll-container">-->
<!--                        <table class="table table-bordered table-hover align-middle mb-0">-->
<!--                            <thead class="table-dark" style="position: sticky; top: 0; z-index: 5;">-->
<!--                                <tr>-->
<!--                                    <th>Claim Id</th>-->
<!--                                    <th>User</th>-->
<!--                                    <th>Policy Name</th>-->
<!--                                    <th>Filed Date</th>-->
<!--                                    <th>Claim Amount</th>-->
<!--                                    <th>Status</th>-->
<!--                                    <th colspan="3">Admin Actions</th>-->
<!--                                </tr>-->
<!--                            </thead>-->
<!--                            <tbody>-->
<!--                                {% for claim in submitted_claims %}-->
<!--                                <tr>-->
<!--                                    <td class="fw-bold">{{ claim.claim_id }}</td>-->
<!--                                    <td>{{ claim.user_name }}</td>-->
<!--                                    <td><strong>{{ claim.policy_name }}</strong></td>-->
<!--                                    <td>{{ claim.filed_date }}</td>-->
<!--                                    <td>-->
<!--                                        <span class="badge bg-info text-dark">â‚¹ {{ claim.claim_amount }}</span>-->
<!--                                    </td>-->
<!--                                    <td>-->
<!--                                        {% if claim.status == 'Approved' %}-->
<!--                                            <span class="badge bg-success text-white">Approved</span>-->
<!--                                        {% elif claim.status == 'Rejected' %}-->
<!--                                            <span class="badge bg-danger text-white">Rejected</span>-->
<!--                                        {% elif claim.status == 'Under Review' %}-->
<!--                                            <span class="badge bg-warning text-dark">Under Review</span>-->
<!--                                        {% else %}-->
<!--                                            <span class="badge bg-info text-dark">Submitted</span>-->
<!--                                        {% endif %}-->
<!--                                    </td>-->

<!--                                    <td class="text-center">-->
<!--                                        {% if claim.status == 'Submitted' %}-->
<!--                                            <button class="btn btn-warning btn-sm" onclick="updateStatus('{{ claim.claim_id }}', 'Under Review')" title="Move to Under Review">-->
<!--                                                <i class="fas fa-search"></i> Review-->
<!--                                            </button>-->
<!--                                        {% elif claim.status == 'Under Review' %}-->
<!--                                            <button class="btn btn-success btn-sm" onclick="updateStatus('{{ claim.claim_id }}', 'Approved')" title="Approve Claim">-->
<!--                                                <i class="fas fa-check"></i> Approve-->
<!--                                            </button>-->
<!--                                        {% endif %}-->

<!--                                        {% if claim.status != 'Approved' and claim.status != 'Rejected' %}-->
<!--                                            <button class="btn btn-danger btn-sm" data-bs-toggle="modal" data-bs-target="#commentModal" data-claim-id="{{ claim.claim_id }}" data-action-type="Reject" title="Reject Claim">-->
<!--                                                <i class="fas fa-times-circle"></i> Reject-->
<!--                                            </button>-->
<!--                                        {% endif %}-->
<!--                                    </td>-->

<!--                                    <td class="text-center">-->
<!--                                        <button class="btn btn-secondary btn-sm" data-bs-toggle="modal" data-bs-target="#commentModal" data-claim-id="{{ claim.claim_id }}" data-action-type="Comment" title="Add/View Comment">-->
<!--                                            <i class="fas fa-comment-dots"></i> Comment-->
<!--                                        </button>-->
<!--                                    </td>-->

<!--                                    <td class="text-center">-->
<!--                                        <button class="btn btn-info btn-sm me-1" onclick="viewClaimDetails('{{ claim.claim_id }}')" title="View Full Details">-->
<!--                                            <i class="fas fa-eye"></i> View-->
<!--                                        </button>-->
<!--                                        {% if claim.document_url %}-->
<!--                                        <a href="{{ claim.document_url }}" target="_blank" class="btn btn-dark btn-sm" title="View Submitted Document (Read Only)">-->
<!--                                            <i class="fas fa-file-alt"></i> Doc-->
<!--                                        </a>-->
<!--                                        {% endif %}-->
<!--                                    </td>-->
<!--                                </tr>-->
<!--                                {% empty %}-->
<!--                                <tr>-->
<!--                                    <td colspan="9" class="text-center py-5">-->
<!--                                        <div class="alert alert-info d-inline-block">-->
<!--                                            <i class="fas fa-info-circle me-2"></i> No claims submitted yet.-->
<!--                                        </div>-->
<!--                                    </td>-->
<!--                                </tr>-->
<!--                                {% endfor %}-->
<!--                            </tbody>-->
<!--                        </table>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--&lt;!&ndash; Comment/Reject Modal &ndash;&gt;-->
<!--<div class="modal fade" id="commentModal" tabindex="-1" aria-labelledby="commentModalLabel" aria-hidden="true">-->
<!--    <div class="modal-dialog">-->
<!--        <div class="modal-content border-0 shadow">-->
<!--            <div class="modal-header bg-primary text-white">-->
<!--                <h5 class="modal-title" id="commentModalLabel">Add Comment for Claim: <span id="claimIdDisplay"></span></h5>-->
<!--                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>-->
<!--            </div>-->
<!--            <div class="modal-body">-->
<!--                <form id="commentForm">-->
<!--                    <input type="hidden" id="modalClaimId" name="claim_id">-->
<!--                    <input type="hidden" id="modalActionType" name="action_type">-->

<!--                    <div class="mb-3">-->
<!--                        <label for="adminComment" class="form-label">Comment / Reason for Rejection:</label>-->
<!--                        <textarea class="form-control" id="adminComment" name="comment" rows="4" required></textarea>-->
<!--                    </div>-->
<!--                    <p id="commentNote" class="text-muted small"></p>-->

<!--                    <div class="modal-footer px-0 pb-0">-->
<!--                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>-->
<!--                        <button type="submit" class="btn btn-primary">-->
<!--                            <i class="fas fa-paper-plane me-1"></i> Submit-->
<!--                        </button>-->
<!--                    </div>-->
<!--                </form>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--<style>-->
<!--    /* Main content styling */-->
<!--    .main-content {-->
<!--        margin-left: 250px;-->
<!--        margin-top:60px;-->
<!--        transition: all 0.3s ease;-->
<!--        background: #f4f7f6;-->
<!--        display: flex;-->
<!--        flex-direction: column;-->
<!--&lt;!&ndash;        width: calc(100% - 250px);&ndash;&gt;-->
<!--        min-height: 100vh;-->
<!--    }-->

<!--    @media (max-width: 992px) {-->
<!--        .main-content {-->
<!--            margin-left: 0 !important;-->
<!--            width: 100% !important;-->
<!--        }-->
<!--    }-->

<!--    /* Claims table styling */-->
<!--    .claims-table-wrapper {-->
<!--        background: white;-->
<!--        padding: 20px;-->
<!--        border-radius: 8px;-->
<!--        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);-->
<!--    }-->

<!--    .table-scroll-container {-->
<!--        overflow-x: auto;-->
<!--        min-height: 400px;-->
<!--    }-->

<!--    table {-->
<!--        min-width: 1200px;-->
<!--        width: 100%;-->
<!--    }-->

<!--    .table th, .table td {-->
<!--        vertical-align: middle;-->
<!--        font-size: 0.9rem;-->
<!--    }-->

<!--    .action-btns .btn {-->
<!--        padding: 5px 8px;-->
<!--        font-size: 0.8rem;-->
<!--        margin: 2px;-->
<!--    }-->

<!--    /* Button styling */-->
<!--    .btn-warning {-->
<!--        background-color: #ffc107;-->
<!--        border-color: #ffc107;-->
<!--    }-->

<!--    .btn-success {-->
<!--        background-color: #198754;-->
<!--        border-color: #198754;-->
<!--    }-->

<!--    .btn-danger {-->
<!--        background-color: #dc3545;-->
<!--        border-color: #dc3545;-->
<!--    }-->

<!--    .btn-secondary {-->
<!--        background-color: #6c757d;-->
<!--        border-color: #6c757d;-->
<!--    }-->

<!--    .btn-info {-->
<!--        background-color: #0dcaf0;-->
<!--        border-color: #0dcaf0;-->
<!--    }-->

<!--    .btn-dark {-->
<!--        background-color: #212529;-->
<!--        border-color: #212529;-->
<!--    }-->

<!--    /* Responsive adjustments */-->
<!--    @media (max-width: 768px) {-->
<!--        .claims-table-wrapper {-->
<!--            padding: 10px;-->
<!--        }-->

<!--        .card-header {-->
<!--            flex-direction: column;-->
<!--            gap: 10px;-->
<!--            text-align: center;-->
<!--        }-->

<!--        .card-header h5 {-->
<!--            font-size: 1.1rem;-->
<!--        }-->
<!--    }-->

<!--    @media (max-width: 576px) {-->
<!--        .content-body {-->
<!--            padding: 5px;-->
<!--        }-->

<!--        .btn {-->
<!--            padding: 4px 8px !important;-->
<!--            font-size: 11px;-->
<!--            margin-bottom: 2px;-->
<!--        }-->
<!--    }-->
<!--</style>-->

<!--<script>-->
<!--    document.addEventListener('DOMContentLoaded', function () {-->
<!--        const commentModal = document.getElementById('commentModal');-->
<!--        const commentModalLabel = document.getElementById('commentModalLabel');-->
<!--        const claimIdDisplay = document.getElementById('claimIdDisplay');-->
<!--        const modalClaimId = document.getElementById('modalClaimId');-->
<!--        const modalActionType = document.getElementById('modalActionType');-->
<!--        const commentNote = document.getElementById('commentNote');-->

<!--        // Function for Status progression buttons (Under Review -> Approved)-->
<!--        window.updateStatus = function(claimId, newStatus) {-->
<!--            if (confirm(`Are you sure you want to change the status of Claim ${claimId} to "${newStatus}"?`)) {-->
<!--                // AJAX call simulation-->
<!--                alert(`Claim ${claimId} status updated to: ${newStatus}. (Simulated)`);-->
<!--                // location.reload();-->
<!--            }-->
<!--        };-->

<!--        // Function for View Details button-->
<!--        window.viewClaimDetails = function(claimId) {-->
<!--            // Navigation simulation-->
<!--            alert(`Navigating to detailed view page for Claim ${claimId}. (Simulated)`);-->
<!--        };-->

<!--        // Setup Modal when triggered by Comment or Reject buttons-->
<!--        commentModal.addEventListener('show.bs.modal', event => {-->
<!--            const button = event.relatedTarget;-->
<!--            const claimId = button.getAttribute('data-claim-id');-->
<!--            const actionType = button.getAttribute('data-action-type');-->

<!--            // Update modal elements dynamically-->
<!--            claimIdDisplay.textContent = claimId;-->
<!--            modalClaimId.value = claimId;-->
<!--            modalActionType.value = actionType;-->

<!--            if (actionType === 'Reject') {-->
<!--                commentModalLabel.innerHTML = `<i class="fas fa-exclamation-triangle me-2"></i>Reject Claim: ${claimId}`;-->
<!--                commentNote.textContent = 'A comment/reason is mandatory when rejecting a claim.';-->
<!--                document.getElementById('adminComment').required = true;-->
<!--            } else {-->
<!--                commentModalLabel.innerHTML = `<i class="fas fa-comment-dots me-2"></i>Add Comment for Claim: ${claimId}`;-->
<!--                commentNote.textContent = 'Add a comment if additional information is required or for internal notes.';-->
<!--                document.getElementById('adminComment').required = false;-->
<!--            }-->

<!--            document.getElementById('adminComment').value = '';-->
<!--        });-->

<!--        // Handle Comment/Reject Form Submission-->
<!--        document.getElementById('commentForm').addEventListener('submit', function(e) {-->
<!--            e.preventDefault();-->
<!--            const form = e.target;-->
<!--            const claimId = form.elements['claim_id'].value;-->
<!--            const actionType = form.elements['action_type'].value;-->
<!--            const comment = form.elements['comment'].value;-->

<!--            // Validation for Reject-->
<!--            if (actionType === 'Reject' && comment.trim() === '') {-->
<!--                alert('Reason for rejection is required!');-->
<!--                return;-->
<!--            }-->

<!--            if (actionType === 'Reject') {-->
<!--                alert(`Claim ${claimId} REJECTED with comment: "${comment}" (Simulated)`);-->
<!--            } else {-->
<!--                alert(`Comment submitted for Claim ${claimId}: "${comment}" (Simulated)`);-->
<!--            }-->

<!--            // Close modal (simulated)-->
<!--            const modalInstance = bootstrap.Modal.getInstance(commentModal);-->
<!--            modalInstance.hide();-->
<!--            // location.reload();-->
<!--        });-->

<!--        // Sidebar toggle functionality-->
<!--        const mobileToggle = document.getElementById('mobileToggle');-->
<!--        if (mobileToggle) {-->
<!--            mobileToggle.addEventListener('click', function() {-->
<!--                const sidebar = document.querySelector('.sidebar');-->
<!--                const mainContent = document.querySelector('.main-content');-->

<!--                if (sidebar && mainContent) {-->
<!--                    sidebar.classList.toggle('show');-->
<!--                    mainContent.style.marginLeft = sidebar.classList.contains('show') ? '250px' : '0';-->
<!--                    mainContent.style.width = sidebar.classList.contains('show') ? 'calc(100% - 250px)' : '100%';-->
<!--                }-->
<!--            });-->
<!--        }-->
<!--    });-->
<!--</script>-->
<!--{% endblock %}-->